(this["webpackJsonpdots-game"]=this["webpackJsonpdots-game"]||[]).push([[0],{59:function(e,t,a){e.exports=a(86)},64:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(7),i=a.n(s),l=(a(64),a(25)),c=a.n(l),o=a(32),u=a(45),d=a(46),m=a(51),f=a(52),h=a(33),v=a.n(h),g=a(118),p=a(117),w=a(119),k=function(e){var t=e.settings,a=void 0===t?{}:t,n=e.onChange,s=e.mode;return r.a.createElement("div",{className:"game-mode"},r.a.createElement(g.a,{select:!0,label:"Pick game mode",className:"select",value:s,onChange:n},Object.keys(a).map((function(e,t){return r.a.createElement(w.a,{key:t,value:e},e)}))))},y=function(e){var t=e.isBlue,a=e.isGreen,n=e.isRed,s=e.clickable,i={backgroundColor:t?"blue":a?"green":n?"red":"white",cursor:e.started&&s?"pointer":"default"};return r.a.createElement("div",{className:"square",style:i,onClick:e.onClick,"data-id":e.id})},E=function(e){var t=e.winners;return r.a.createElement("div",{className:"winners"},r.a.createElement("div",{className:"winners-title"},"Leader Board"),r.a.createElement("div",{className:"winners-content"},t.map((function(e){return r.a.createElement("div",{className:"winners-item winner",key:e.id},r.a.createElement("div",{className:"winner-name"},e.winner),r.a.createElement("div",{className:"winner-date"},e.date))}))))},b=function(e){Object(f.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).postData=Object(o.a)(c.a.mark((function e(){var t,a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,a="".concat(t.toTimeString().slice(0,5),"; ").concat(t.getDate()," ").concat(t.toLocaleDateString("en-US",{month:"long"})," ").concat(t.getFullYear()),r={winner:n.state.winner,date:a},e.next=5,fetch("https://starnavi-frontend-test-task.herokuapp.com/winners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){n.setState({winners:e})}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),n.createSquare=function(e){for(var t=[],a=0;a<Math.pow(e,2);a++)t[a]={id:a,isBlue:null,isGreen:null,isRed:null,clickable:!0,available:!0,player:""};return n.setState({squares:t}),t},n.handleClick=function(e){var t=n.state.squares,a=t[e.target.dataset.id];a.isBlue&&(t[a.id].isBlue=!1,t[a.id].isGreen=!0,t[a.id].clickable=!1,n.setState({squares:t}))},n.handleChangeMode=function(e){var t=e.target.value;console.log("gameMode: ",t),n.setState((function(e){return console.log(e.settings[t].field),{mode:t,size:e.settings[t].field,delay:e.settings[t].delay}})),console.log(n.state.settings[t].field),n.createSquare(n.state.settings[t].field)},n.endGame=function(e){n.setState({isStart:!1,isEnd:!0,winner:e}),alert("".concat(e," won")),n.postData()},n.delay=function(){var e=setInterval((function(){var t=n.state,a=t.squares,r=t.size,s=t.player,i=a.filter((function(e){return e.isBlue}));if(i.length&&(a[i[0].id].isBlue=!1,a[i[0].id].isRed=!0,a[i[0].id].clickable=!1,console.log(a)),a.filter((function(e){return e.isGreen})).length===Math.round(Math.pow(r,2)/2))n.endGame(s),clearInterval(e);else if(a.filter((function(e){return e.isRed})).length===Math.round(Math.pow(r,2)/2))n.endGame("Computer"),clearInterval(e);else{var l=a.filter((function(e){return e.available}));if(l.length){var c=l[Math.floor(Math.random()*l.length)];a[c.id].isBlue=!0,a[c.id].available=!1,n.setState({squares:a})}}}),n.state.delay)},n.startGame=function(){var e=n.state,t=e.size;if(e.isEnd){var a=n.createSquare(t);n.setState({squares:a,isEnd:!1})}n.setState({isStart:!0}),n.delay()},n.setName=function(e){n.setState({player:e.target.value})},n.state={settings:null,mode:"",size:null,delay:null,winner:"",isEnd:!1,isStart:!1,squares:null,player:"",winners:[]},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()("https://starnavi-frontend-test-task.herokuapp.com/game-settings");case 2:return t=e.sent,e.next=5,v()("https://starnavi-frontend-test-task.herokuapp.com/winners");case 5:a=e.sent,console.log(t.data),this.setState({settings:t.data,size:t.data[Object.keys(t.data)[0]].field,winners:a.data});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.settings,n=t.mode,s=t.size,i=t.player,l=t.isEnd,c=t.isStart,o=t.squares,u=t.winners;return r.a.createElement("div",{className:"game"},r.a.createElement("div",{className:"wrap"},a&&r.a.createElement("div",{className:"game-settings"},r.a.createElement(k,{settings:a,onChange:this.handleChangeMode,mode:n}),r.a.createElement(g.a,{label:"You'r name?",className:"input",onChange:this.setName,value:i}),r.a.createElement(p.a,{onClick:this.startGame,variant:"contained",className:"play-button",disabled:!n||c||!i},l?"Play again!":"Play")),o&&r.a.createElement("div",{className:"game-field",style:{maxWidth:"".concat(45*s,"px")}},o.map((function(t){return r.a.createElement(y,Object.assign({key:t.id},t,{onClick:e.handleClick,started:c}))})))),r.a.createElement(E,{winners:u}))}}]),a}(n.Component);var S=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Hello in Dot's Game"),r.a.createElement(b,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[59,1,2]]]);
//# sourceMappingURL=main.d41c07f1.chunk.js.map